# 介绍

我们会在此介绍基础游戏系统是如何运作的，以便使mod制作新手能更好地了解基础游戏的代码。该页面仍为WIP，因此你可以随时提交任何新的知识。

# 卡牌和动作

如你所知，整个游戏围绕着卡牌进行。游戏中的所有卡牌都是继承自 `AbstractCard` 类的。每张卡牌提供给属性给 `super()` 来运作， 它来自 `AbstractCard` 的构造函数。卡牌也可以通过 `AbstractCard` 来设置其他细节。

卡牌主要重写的方法是 `use()` 方法，它包含了卡牌效果的所有逻辑。这是玩家使用卡牌时**实际调用**的方法。你需要注意的是，当游戏状态改变时，卡牌本身并没有做很多复杂的工作。这得益于“动作”。所有的动作继承自 `AbstractGameAction` ，它定义了动作如何执行。游戏的动作是那些实际修改游戏状态比如伤害敌人，抽卡等的代码。游戏在 `actions.common` 包中提供了很多默认动作，比如造成伤害，抽卡，治疗等。游戏就是通过各种动作的组合来生成卡牌或者复杂动作的。例如，一张卡牌的效果是“抽两张卡，获得一点费用”，这就是通过两个动作组合起来的，一个是抽卡动作，一个是获得费用的动作。

# 动作队列

游戏实际上是依靠动作队列执行的，尤其是 `AbstractDungeon.actionManager` 。`actionManager` 是一个 `public static` 对象，它允许你对动作进行排列。任何时候你想要在游戏中打出卡牌或者触发某些hook时，你都需要把它添加到队列最前或者最后面。使用 `addToTop()` 向队列的最前添加，使用 `addToBottom()` 向最后添加。